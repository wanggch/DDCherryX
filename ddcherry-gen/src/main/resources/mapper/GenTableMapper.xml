<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ddcherry.gen.mapper.GenTableMapper">

    <select id="selectTableColumns" resultType="cn.ddcherry.gen.domain.GenTableColumn">
        SELECT
            column_name     AS columnName,
            column_comment  AS columnComment,
            column_type     AS columnType,
            CASE WHEN column_key = 'PRI' THEN '1' ELSE '0' END AS isPk,
            CASE WHEN is_nullable = 'NO' THEN '1' ELSE '0' END AS isRequired,
            CASE WHEN extra = 'auto_increment' THEN '1' ELSE '0' END AS isIncrement
        FROM information_schema.columns
        WHERE table_schema = (SELECT DATABASE())
          AND table_name = #{tableName}
        ORDER BY ordinal_position
    </select>

    <select id="selectTables" resultType="cn.ddcherry.gen.domain.TableMetadata">
        SELECT
            table_name    AS tableName,
            table_comment AS tableComment,
            create_time   AS createTime,
            update_time   AS updateTime
        FROM information_schema.tables
        WHERE table_schema = (SELECT DATABASE())
        ORDER BY table_name
    </select>

</mapper>
