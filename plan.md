# 开发计划

## 工具与框架约束
- 工具类库统一使用 [Hutool](https://hutool.cn/)，统一在父级 `pom.xml` 中声明版本并在各子模块继承使用。
- 安全框架统一使用 [Sa-Token](https://sa-token.cc/)，包括登录鉴权、权限注解以及在线用户会话管理。

## 近期开发任务

### 1. 依赖管理与基础设施
1. 在根 `pom.xml` 中增加 Hutool 与 Sa-Token 依赖版本，确保所有子模块可复用。
2. 在 `ddcherry-framework` 中封装 Hutool 常用工具（日期、字符串、集合、HTTP等）的统一入口，避免各模块重复创建工具类。
3. 在 `ddcherry-framework` 中搭建 Sa-Token 基础配置（拦截器、全局异常处理、持久化配置）。

### 2. 身份认证与权限体系
1. 在 `ddcherry-system` 模块中实现基于 Sa-Token 的登录接口、Token 创建与校验逻辑。
2. 结合 Sa-Token 注解（如 `@SaCheckPermission`）改造现有的后台接口权限控制。
3. 提供在线用户会话管理接口（踢人、强制下线、查询会话等）。

### 3. 系统功能迭代
1. `ddcherry-admin`: 集成 Sa-Token 登录流程到前端交互，完善登录态失效处理。
2. `ddcherry-system`: 补充用户、角色、菜单管理的 CRUD 接口与数据校验，并使用 Hutool 进行参数校验/工具处理。
3. `ddcherry-gen`: 结合 Hutool 的模板引擎或文件工具，优化代码生成模块的模板加载与文件写入性能。

### 4. 测试与质量保障
1. 编写基于 Sa-Token 的单元/集成测试，覆盖登录、权限校验、会话过期等场景。
2. 为 Hutool 封装工具编写单元测试，确保工具返回值与异常行为符合预期。
3. 建立流水线任务：构建 -> 单元测试 -> 静态代码检查，确保新增依赖与代码质量。

### 5. 部署与运维
1. 更新部署文档，说明 Sa-Token 配置项（缓存、Session 超时时间等）以及 Hutool 版本要求。
2. 在配置中心（如 Nacos）中加入 Sa-Token 与 Hutool 相关配置模板，确保环境一致性。
3. 对生产环境进行回归测试，重点关注登录态、权限控制以及 Hutool 工具使用导致的潜在兼容问题。
